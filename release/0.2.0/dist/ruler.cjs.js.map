{"version":3,"file":"ruler.cjs.js","sources":["../src/consts.ts","../src/InnerRuler.tsx","../src/Ruler.tsx","../src/index.umd.ts"],"sourcesContent":["import { RulerProps } from \"@scena/react-ruler/declaration/types\";\n\nexport const PROPERTIES: Array<keyof RulerProps> = [\n    \"type\", \"width\", \"height\",\n    \"unit\", \"zoom\", \"style\", \"backgroundColor\", \"lineColor\",\n    \"textColor\",\n];\n","import { Component, h } from \"preact\";\nimport { createPortal } from \"preact/compat\";\nimport { ref } from \"framework-utils\";\nimport PreactRuler from \"preact-ruler\";\nimport { InnerRulerProps } from \"./types\";\n\nexport default class InnerRuler extends Component<InnerRulerProps, InnerRulerProps> {\n    public state: InnerRulerProps = {};\n    public preactRuler: PreactRuler;\n    constructor(props: InnerRulerProps) {\n        super(props);\n        this.state = this.props;\n    }\n    public render() {\n        const { parentElement, ...state } = this.state;\n        return createPortal(<PreactRuler ref={ref(this, \"preactRuler\")} {...state} />, parentElement);\n    }\n}\n","import { ref, Properties } from \"framework-utils\";\nimport { h, render } from \"preact\";\nimport { PROPERTIES } from \"./consts\";\nimport { RulerInterface, RulerProps } from \"@scena/react-ruler/declaration/types\";\nimport InnerRuler from \"./InnerRuler\";\n\n@Properties(PROPERTIES, (prototype, property) => {\n    Object.defineProperty(prototype, property, {\n        get() {\n            return this.getRuler().props[property];\n        },\n        set(value) {\n            this.innerRuler.setState({\n                [property]: value,\n            });\n        },\n        enumerable: true,\n        configurable: true,\n    });\n})\nclass Ruler implements RulerInterface {\n    private tempElement = document.createElement(\"div\");\n    private innerRuler!: InnerRuler;\n\n    constructor(parentElement: HTMLElement, options: Partial<RulerProps> = {}) {\n        render(\n            <InnerRuler ref={ref(this, \"innerRuler\")}\n                {...options} parentElement={parentElement} />,\n            this.tempElement,\n        );\n    }\n    public scroll(scrollPos: number) {\n        this.getRuler().scroll(scrollPos);\n    }\n    public resize() {\n        this.getRuler().resize();\n    }\n    public destroy() {\n        render(\"\", this.tempElement);\n        this.tempElement = null;\n        this.innerRuler = null;\n    }\n    private getRuler() {\n        return this.innerRuler.preactRuler;\n    }\n}\n\nexport default Ruler;\n","import Ruler from \"./Ruler\";\nimport { PROPERTIES } from \"./consts\";\n\n(Ruler as any).PROPERTIES = PROPERTIES;\n\nexport default Ruler;\n"],"names":["PROPERTIES","__extends","props","_super","_this","state","_a","parentElement","createPortal","h","PreactRuler","ref","Component","options","document","createElement","render","InnerRuler","tempElement","scrollPos","getRuler","scroll","resize","innerRuler","preactRuler","Ruler","Properties","prototype","property","Object","defineProperty","get","set","value","setState","enumerable","configurable"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEO,IAAMA,UAAU,GAA4B,CAC/C,MAD+C,EACvC,OADuC,EAC9B,QAD8B,EAE/C,MAF+C,EAEvC,MAFuC,EAE/B,OAF+B,EAEtB,iBAFsB,EAEH,WAFG,EAG/C,WAH+C,CAA5C;;ACIP;;;EAAwCC,6BAAA;;qBAGpC,CAAYC,KAAZ;gBACIC,WAAA,KAAA,EAAMD,KAAN,SADJ;;IAFOE,WAAA,GAAyB,EAAzB;IAIHA,KAAI,CAACC,KAAL,GAAaD,KAAI,CAACF,KAAlB;;;;;;gBAEG,GAAP;QACUI,eAAN;QAAQC,gCAAR;QAAuBF,qCAAvB;;WACOG,mBAAY,CAACC,SAACC;MAAYC,GAAG,EAAEA,kBAAG,CAAC,IAAD,EAAO,aAAP;OAA2BN,OAAjD,EAA4DE,aAA5D,CAAnB;GAFG;;mBAIX;EAXwCK,iBAAxC;;ACcA;;;gBAII,CAAYL,aAAZ,EAAwCM,OAAxC;0BAAwC,EAAA;MAAAA,YAAA;;;oBAHhC,GAAcC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAd;IAIJC,aAAM,CACFP,SAACQ;MAAWN,GAAG,EAAEA,kBAAG,CAAC,IAAD,EAAO,YAAP;OACZE;MAASN,aAAa,EAAEA;OAF9B,EAGF,KAAKW,WAHH,CAAN;;;;;gBAMG,GAAP,UAAcC,SAAd;SACSC,QAAL,GAAgBC,MAAhB,CAAuBF,SAAvB;GADG;;gBAGA,GAAP;SACSC,QAAL,GAAgBE,MAAhB;GADG;;iBAGA,GAAP;IACIN,aAAM,CAAC,EAAD,EAAK,KAAKE,WAAV,CAAN;SACKA,WAAL,GAAmB,IAAnB;SACKK,UAAL,GAAkB,IAAlB;GAHG;;kBAKC,GAAR;WACW,KAAKA,UAAL,CAAgBC,WAAvB;GADI;;EAtBNC,KAAK,eAdVC,yBAAU,CAAC1B,UAAD,EAAa,UAAC2B,SAAD,EAAYC,QAAZ;IACpBC,MAAM,CAACC,cAAP,CAAsBH,SAAtB,EAAiCC,QAAjC,EAA2C;MACvCG,GAAG;eACQ,KAAKX,QAAL,GAAgBlB,KAAhB,CAAsB0B,QAAtB,CAAP;OAFmC;MAIvCI,GAAG,YAACC;;;aACKV,UAAL,CAAgBW,QAAhB,WACI5B,GAACsB,SAAD,GAAYK,SADhB;OALmC;MASvCE,UAAU,EAAE,IAT2B;MAUvCC,YAAY,EAAE;KAVlB;GADO,IAcLX,MAAA;cAyBN;GAzBA;;ACjBCA,KAAa,CAACzB,UAAd,GAA2BA,UAA3B;;;;"}